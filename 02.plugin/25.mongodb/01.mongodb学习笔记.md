[TOC]

#mongodb学习笔记

##mongodb 安装
wget http://fastdl.mongodb.org/linux/mongodb-linux-x86_64-3.2.8.tgz
tar zxvf mongodb-linux-x86_64-3.2.8.tgz
mv mongodb-linux-x86_64-3.2.8 /usr/local/mongodb
mongodb 启动
服务端启动
/usr/local/mongodb/bin/mongod --dbpath /data/db/mongodb/data --logpath /data/db/mongodb/mongodb.log --fork --port 27017
客户端启动
./bin/mongo
##基本语法
	show dbs;
	use database;
	show collections/tables;
	db.help();
	#创建数据库
	use database;
	db.createCollection("t1");
	db.t1.insert({_id:2,name:'name2'});
	db.t2.insert({_id:2,name:'name2'});//允许隐式创建表

###删除数据

db.t1.remove() 注意   如果不增条件将全部删除。
db.stu.remove({gender:'f'});
###更新
db.stu.update({name:'zhangsan'},{$set:{name:'zhangsan1'},$unset:{t1:true},$rename:{sex:'gender'},$incr:{age:16},$setOnInsert:{gender:'male'}})
{upsert:true/false,multi:true/false}
db.stu.update({name:'zhangsan'},{$set:{name:'zhangsan2'}},{upinsert:true})

### 查询
db.stu.find(<query>,<field>);
db.stu.find({name:'zhangsan'},{name:1,_id:0})

###查询表达式
db.goods.find({cat_id:{$ne:3}},{name:1,_id:0})
db.goods.find({price:{$gt:200}},{name:1,_id:0})
db.goods.find({price:{$lt:200}},{name:1,_id:0})
db.goods.find({price:{$lte:200}},{name:1,_id:0})
db.goods.find({price:{$in:200}},{name:1,_id:0})
db.goods.find({price:{$nin:200}},{name:1,_id:0})
db.goods.find({and:[{price:{$lt:200},{price:{$lt:500}]},{name:1,_id:0})

db.goods.find()


###运算符
$and:[{},{}]
$or:[{},{}]
$not:3
$nor:[{},{}]//不等条件
$exists://查询某列是否存在
$mod:[5,0]
$all:[]
$where:'this.price>500'//不推荐使用
$regex:''//不推荐使用
###游标操作
