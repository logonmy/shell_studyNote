[TOC]
#hadoop伪分布式安装

##安装jdk
参见[jdk安装](../../03.linux/01.centos/02.java相关配置/01.jdk安装和环境变量配置.md)
##拷贝 hadoop-2.6.2.tar.gz到~/app
tar -zxf hadoop-2.6.2.tar.gz

##配置hadoop环境变量
	vim ~/.bashrc
	HADOOP_HOME=/home/hadoop/app/hadoop-2.6.2
	PATH=$PATH:$HADOOP_HOME/bin
	export HADOOP_HOME

##修改配置文件
[配置文件参考](01.dir/伪分布式配置文件/hadoop2.6.2)

第一个：hadoop-env.sh
	vim hadoop-env.sh
	#第27行
	export JAVA_HOME=/hom/hadoop/app/jdk1.7
		
第二个：core-site.xml

	<!-- 指定HADOOP所使用的文件系统schema（URI），HDFS的老大（NameNode）的地址 -->

	<property>
			<name>fs.defaultFS</name>
			<value>hdfs://hadoopallinone:9000</value>
	</property>

	<!-- 指定hadoop运行时产生文件的存储目录 -->

	<property>
			<name>hadoop.tmp.dir</name>
			<value>/home/hadoop/app/hadoop-2.6.2/tmp</value>
	</property>
	
第三个：hdfs-site.xml 

	<!-- 指定HDFS副本的数量 -->

	<property>
		<name>dfs.replication</name>
		<value>1</value>
	</property>
	
第四个：mapred-site.xml (mv mapred-site.xml.template mapred-site.xml)

	mv mapred-site.xml.template mapred-site.xml
	vim mapred-site.xml

	<!-- 指定mr运行在yarn上 -->

	<property>
		<name>mapreduce.framework.name</name>
		<value>yarn</value>
	</property>
	
第五个：yarn-site.xml

	<!-- 指定YARN的老大（ResourceManager）的地址 -->

	<property>
		<name>yarn.resourcemanager.hostname</name>
		<value>hadoopallinone</value>
	</property>

	<!-- reducer获取数据的方式 -->

	<property>
		<name>yarn.nodemanager.aux-services</name>
		<value>mapreduce_shuffle</value>
	</property>
##ssh无密码登陆

	 ssh-keygen -t rsa -P '' -f ~/.ssh/id_rsa
	 cat ~/.ssh/id_rsa.pub >> ~/.ssh/authorized_keys
	 ssh-copy-id -i ~/.ssh/id_rsa.pub hadoopallinone

## 格式化HDFS
 	hdfs namenode -format

name has been successfully formatted.表示成功
##操作

	sbin/start-yarn.sh
	sbin/stop-yarn.sh

	sbin/start-dfs.sh
	sbin/stop-dfs.sh

##验证
	jps
	netstat -nltp

	hadoop fs -ls hdfs://centos:9000/
	hadoop fs -put ../hadoop-2.6.2.tar.gz /
	hadoop fs -get /hadoop-2.6.2.tar.gz
	hadoop fs -cat /yue/outdata/part_000

##简单程序

	cd $HADOOP_HOME/share/hadoop/mapreduce/
	hadoop jar hadoop-mapreduce-examples-2.6.2.jar wordcount /yue/srcdata /yue/outdata
	hadoop fs -ls /yue/outdata/
	hadoop fs -cat /yue/outdata/part-r-00000

##安装错误

1. Unable to load native-hadoop library for your platform hadoop平台编译版本和使用的操作系统版本不一致

	hadoop-2.4.1/lib/native
	file libhadoop.so.1.0.0

2. java.io.IOException: Cannot create directory /home/hadoop/hadoop-2.6.2/tmp/dfs/name/current权限问题  core-site 目录错误